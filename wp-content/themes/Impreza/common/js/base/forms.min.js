jQuery(function($){$('.w-form.for_cform').each(function(){var $form=$(this),$submitBtn=$form.find('.w-btn'),$resultField=$form.find('.w-form-message'),options=$form.find('.w-form-json')[0].onclick(),$dateField=$form.find('.w-form-row.for_date input'),jQueryDatePickerPath=$form.data('jquery-ui'),pickerOptions={},$requiredCheckboxes=$form.find('.for_checkboxes.required');$form.find('.w-form-json').remove();if($dateField.length){if(jQueryDatePickerPath!==undefined){$us.getScript(jQueryDatePickerPath,function(){pickerOptions=$.extend(pickerOptions,options['jquery-ui-locale']);initDateFields()})}else{initDateFields()}
function initDateFields(){$dateField.each(function(){pickerOptions.dateFormat=$(this).data('date-format');pickerOptions.onClose=function(){$(this).closest('.w-form-row').removeClass('focused')};$(this).datepicker(pickerOptions)})}}
$form.submit(function(event){event.preventDefault();if($submitBtn.hasClass('loading')){return}
$resultField.usMod('type',!1).html('');var errors=0;$form.find('[data-required="true"]').each(function(){var $input=$(this),isEmpty=$input.is('[type="checkbox"]')?(!$input.is(':checked')):($input.val()==''),$row=$input.closest('.w-form-row');if($row.hasClass('for_checkboxes')){return!0}
$row.toggleClass('check_wrong',isEmpty);if(isEmpty){errors ++}});if($requiredCheckboxes.length){$requiredCheckboxes.each(function(){var $input=$(this).find('input[type="checkbox"]'),$row=$input.closest('.w-form-row'),isEmpty=!$input.is(':checked')?!0:!1;$row.toggleClass('check_wrong',isEmpty);if(isEmpty){errors ++}})}
if(errors!==0){return}
$submitBtn.addClass('loading');$.ajax({type:'POST',url:options.ajaxurl,dataType:'json',data:$form.serialize(),success:function(result){if(result.success){$resultField.usMod('type','success').html(result.data);$form.find('.w-form-row.check_wrong').removeClass('check_wrong');$form.find('.w-form-row.not-empty').removeClass('not-empty');$form.find('input[type="text"], input[type="email"], textarea').val('');$form[0].reset();$form.trigger('usCformSuccess')}else{$form.find('.w-form-row.check_wrong').removeClass('check_wrong');if(result.data&&typeof result.data=='object'){for(var fieldName in result.data){if(fieldName=='empty_message'){$resultField.usMod('type','error');continue}
if(!result.data.hasOwnProperty(fieldName)){continue}
fieldName=result.data[fieldName].name;var $input=$form.find('[name="'+fieldName+'"]');$input.closest('.w-form-row').addClass('check_wrong')}}else{$resultField.usMod('type','error').html(result.data)}}},complete:function(){$submitBtn.removeClass('loading')}})})})});jQuery(function($){$('input[type="text"], input[type="email"], input[type="tel"], input[type="number"], input[type="date"], input[type="search"], input[type="url"], input[type="password"], textarea').each(function(index,input){var $input=$(input),$row=$input.closest('.w-form-row');if($input.attr('type')=='hidden'){return}
$row.toggleClass('not-empty',$input.val()!='');$input.on('input change',function(){$row.toggleClass('not-empty',$input.val()!='')})});$(document).on('focus','.w-form-row-field input, .w-form-row-field textarea',function(){$(this).closest('.w-form-row').addClass('focused')});$(document).on('blur','.w-form-row:not(.for_date) input, .w-form-row-field textarea',function(){$(this).closest('.w-form-row').removeClass('focused')})})
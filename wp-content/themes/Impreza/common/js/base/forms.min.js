jQuery(function($){$us.WForm=function(context){var $context=$(context);if(!$context.is('.for_cform')){$context=$('.w-form.for_cform',$context)}
$context.each(function(){var $form=$(this),$submitBtn=$('.w-btn',$form),$resultField=$('.w-form-message',$form),options=$('.w-form-json',$form)[0].onclick()||{},$dateField=$('.w-form-row.for_date input',$form),jQueryDatePickerPath=$form.data('jquery-ui'),pickerOptions={},$requiredCheckboxes=$('.for_checkboxes.required',$form);if(!$us.usbPreview)$('.w-form-json',$form).remove();if($dateField.length){if(jQueryDatePickerPath!==undefined){$us.getScript(jQueryDatePickerPath,function(){pickerOptions=$.extend(pickerOptions,options['jquery-ui-locale']);initDateFields()})}else{initDateFields()}
function initDateFields(){$dateField.each(function(){pickerOptions.dateFormat=$(this).data('date-format');pickerOptions.onClose=function(){$(this).closest('.w-form-row').removeClass('focused')};$(this).datepicker(pickerOptions)})}}
$form.submit(function(event){event.preventDefault();if($submitBtn.hasClass('loading')){return}
$resultField.usMod('type',!1).html('');var errors=0;$('[data-required="true"]',$form).each(function(){var $input=$(this),isEmpty=$input.is('[type="checkbox"]')?(!$input.is(':checked')):($input.val()==''),$row=$input.closest('.w-form-row');if($row.hasClass('for_checkboxes')){return!0}
$row.toggleClass('check_wrong',isEmpty);if(isEmpty){errors ++}});if($requiredCheckboxes.length){$requiredCheckboxes.each(function(){var $input=$('input[type="checkbox"]',this),$row=$input.closest('.w-form-row'),isEmpty=!$input.is(':checked')?!0:!1;$row.toggleClass('check_wrong',isEmpty);if(isEmpty){errors ++}})}
if(errors!==0){return}
$submitBtn.addClass('loading');$.ajax({type:'POST',url:options.ajaxurl,dataType:'json',data:$form.serialize(),success:function(result){if(result.success){$resultField.usMod('type','success').html(result.data);$('.w-form-row.check_wrong',$form).removeClass('check_wrong');$('.w-form-row.not-empty',$form).removeClass('not-empty');$('input[type="text"], input[type="email"], textarea',$form).val('');$form[0].reset();$form.trigger('usCformSuccess')}else{$('.w-form-row.check_wrong',$form).removeClass('check_wrong');if(result.data&&typeof result.data=='object'){for(var fieldName in result.data){if(fieldName=='empty_message'){$resultField.usMod('type','error');continue}
if(!result.data.hasOwnProperty(fieldName)){continue}
fieldName=result.data[fieldName].name;var $input=$('[name="'+fieldName+'"]',$form);$input.closest('.w-form-row').addClass('check_wrong')}}else{$resultField.usMod('type','error').html(result.data)}}},complete:function(){$submitBtn.removeClass('loading')}})})});$('input[type="text"], input[type="email"], input[type="tel"], input[type="number"], input[type="date"], input[type="search"], input[type="url"], input[type="password"], textarea',$context).each(function(index,input){var $input=$(input),$row=$input.closest('.w-form-row');if($input.attr('type')=='hidden'){return}
$row.toggleClass('not-empty',$input.val()!='');$input.on('input change',function(){$row.toggleClass('not-empty',$input.val()!='')})})};$.fn.wForm=function(){return this.each(function(){$(this).data('wForm',new $us.WForm(this))})};$(document).wForm()});jQuery(function($){$(document).on('focus','.w-form-row-field input, .w-form-row-field textarea',function(){$(this).closest('.w-form-row').addClass('focused')});$(document).on('blur','.w-form-row:not(.for_date) input, .w-form-row-field textarea',function(){$(this).closest('.w-form-row').removeClass('focused')})})